Installing or upgrading to WIEN2k 17.1, refer to the WIEN2k website [ http://susi.theochem.tuwien.ac.at/ ].

Patches for WIEN2k 17.1
-----------------------

- Place band.patch into $WIENROOT/SRC_w2web/htdocs/exec
- Apply the patch with: patch -b band.pl band.patch
Description: Fixes w2web parallel selection for bandstructure.
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16069.html

- Place bz_lin.patch into $WIENROOT/SRC_spaghetti
- Apply the patch with: patch -b bz_lin.f bz_lin.patch
- Recompile
Description: Changes tolerance from 10^-7 back to 10^-5, which can remove needless vertical lines if they appear in the band structure plots.
             The 10^-7 may be needed for cases with very fine mesh [ https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg15787.html ].
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16402.html

- Place configure_int_lapw.patch into $WIENROOT
- Apply the patch with: patch -b configure_int_lapw configure_int_lapw.patch
Description: Improves configure_int_lapw so that it works with the header produced by "x qtl".
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16479.html

- Place dstartpara_lapw.patch into $WIENROOT
- Apply the patch with: patch -b dstartpara_lapw dstartpara_lapw.patch
Description: Tries to improve the serial mode error message reporting from dstartpara_lapw.
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg17120.html

- Place hmsec.patch into $WIENROOT/SRC_lapwso
- Apply the patch with: patch -b hmsec.F hmsec.patch
- Recompile
Description: This patch and -Dold_scalapack need to be added to FPOPT if an ifort version older than composer xe 2013 update 2 is used. However, there are cases where the Scalapack diagonalization of these older compilers can fail. Therefore, it is highly recommended to use a newer ifort compiler version, which has a pzheevr function that eliminates that issue.
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16487.html

- Place init_orb_lapw into $WIENROOT
Description: Script under test for initializing a DFT+U calculation
Usage: init_orb_lapw -h

- Place lapw0.patch into $WIENROOT/SRC_lapw0
- Apply the patch with: patch -b lapw0.F lapw0.patch
- Recompile
Description: Enhancement that enables charged cells with hybrid functionals
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg17039.html

- Place libxc.patch into $WIENROOT/SRC_lapw0
- Apply the patch with: patch -b libxc.F libxc.patch
- Recompile
Description: The SRC_lapw0/libxc.F in WIEN2k_17.1.tar only works with libxc 3.0.0.  To use libxc 4.0.3 with WIEN2k 17.1, apply this patch. 
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16924.html

- Place Makefile.orig.patch into $WIENROOT/SRC_lapwdm
- Apply the patch with: patch -b Makefile.orig Makefile.orig.patch
- Run siteconfig_lapw, select "C Specify Compiler", and set the C compiler again so that siteconfig_lapw updates the lapwdm Makefile
- Recompile
Description: Fixes the lapwdm Makefile.orig so that it will compile with the correct C compiler (in particular when a C compiler other than cc is used, such as icc).
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg17081.html

- Place scf.patch into $WIENROOT/SRC_w2web/htdocs/exec
- Apply the patch with: patch -b scf.pl scf.patch
Description: Fixes w2web parallel selection for scf.
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16069.html

- Place siteconfig_lapw.patch into $WIENROOT
- Apply the patch with: patch -b siteconfig_lapw siteconfig_lapw.patch
Description: Fix for setting FFTW_LIB with siteconfig_lapw.
Reference: https://www.mail-archive.com/wien@zeus.theochem.tuwien.ac.at/msg16920.html